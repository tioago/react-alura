function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Task=function(){function t(t){return{"task.id":t.data("task-id"),"answer.author.id":t.data("author-id")}}function e(){var t=$(".task-feedback"),e=$("#task-content .task-actions"),n=$(".markdownEditor, .openQuestion-answer-title");$(".task-actions").show(),t.length>0&&(e.addClass("screenReader-only"),$(".screenReader-only .task-actions-button-forum").hide(),n.length>0&&n.hide(),t.addClass("task-feedback--visible"),t.attr("aria-hidden","false"),sticky&&sticky.recalc()),i()}function n(t,e,n){var i=document.open("text/html","replace");i.write(t.responseText),i.close()}function i(){var t=$(".task-body-actions-button.task-actions-button-answer");t.removeClass("task-actions-button-spinning"),t.prop("disabled",!1)}function a(){$(".choiceable-opinion").css("display","block")}var s=$(".task"),o=s.data("task-type"),c=s.data("course-code"),r=s.data("section-number");return{submitAnswer:function(i,l){var u;s.data("hasfeedbackanswer")||((u=$(".task-body-actions-button.task-actions-button-answer")).addClass("task-actions-button-spinning"),u.prop("disabled",!0));var d=t(s),p=$(".repetition");if(p[0]&&(o=p.data("repeatable-type"),c=s.data("course-code"),r=s.data("section-number"),(d=t(p))["answer.fromRepetition"]=!0),"singlechoice"==o){var m=$(".alternativeList-item-input:checked");d.alternativeId=m.attr("id"),a()}else if("multiplechoice"==o)$(".alternativeList-item-input:checked").each(function(t){d["answer.alternatives["+t+"].id"]=$(this).attr("id")}),a();else if("openquestion"==o)d["answer.answeredText"]=$(".markdownEditor-textArea").val();else if("fillintheblank"==o){var f=$(".phrase-input").val();d["answer.answeredText"]=f}else"speakingpractice"!=o&&"pronunciationpractice"!=o||(d["answer.feedback"]=l);var v=s.data("url-prefix");$.ajax({type:"POST",url:v+"course/"+c+"/section/"+r+"/"+o+"/answer",data:d,success:i||e,statusCode:{400:i||e,500:n}})},showOpinionIfAvailable:e,toggleChoiceableOpinion:a,enableButton:i}}(),Choiceable=function(){function t(){$(".alternativeList-item-opinionButton").each(function(){var t=$(this)[0];t.classList.contains("alternativeList-item-opinionButton--visible")||t.classList.add("alternativeList-item-opinionButton--visible")}),$(".task-actions").css("display","block"),$(".task-actions-button-next").css("display","inline-block"),sticky.recalc()}return _defineProperty({setup:function(){$(".alternativeList-item-opinionButton").on("click",function(t){t.preventDefault(),$(this).parents("li").toggleClass("alternativeList-item--active"),Aria.expandingButton($(this))})},updateSubmitAnswerIf:function(t){t&&$("#task-content").attr("data-should-submit-answer",!1)},isChecked:function(t){return t.hasClass("alternativeList-item--checked")},isOpinionIcon:function(t){return t.target.classList.contains("alternativeList-item-opinionIcon-use")||t.target.classList.contains("alternativeList-item-opinionIcon")},showAlternativeOpinionsAndNextButton:t,toggleLabelClass:function(t){t.toggleClass("alternativeList-item--checked")},showAlternativeOpinions:function(){$(".alternativeList-item--checked").each(function(){var t=$(this);if(t.find(".alternativeList-item-opinionIcon").length>0){t.addClass("alternativeList-item--active");var e=t.find(".alternativeList-item-opinionButton");Aria.expandingButton(e)}t.data("correct")?$(".singleChoice-alternative-aria-feedback").text("Alternativa correta"):$(".singleChoice-alternative-aria-feedback").text("Alternativa incorreta")}),sticky.recalc()},disableAllAlternatives:function(){$(".alternativeList-item-input").each(function(){$(this).attr("disabled","true")}),$(".alternativeList-item-span").addClass("alternativeList-item-span-disabled")}},"showAlternativeOpinionsAndNextButton",t)}();!function(){var t,e,n=$(".task"),i=n.data("domain"),a=$(".openMenu-button"),s=!1,o=!1;function c(){var t="gnarus.menuClosed="+n.hasClass("menu--inactive")+"; path=/; domain="+i;document.cookie=t}$(".task-menu-button, .task-body-button").on("click",function(t){t.stopPropagation(),n.toggleClass("menu--inactive"),a.toggleClass("openMenu-button--inactive");a.hasClass("openMenu-button--inactive")?a.each(function(){$(this).attr("aria-label","Abrir menu"),$(this).attr("title","Abrir menu")}):a.each(function(){$(this).attr("aria-label","Fechar menu"),$(this).attr("title","Fechar menu")}),c(),sticky.recalc()}),$(".task-submit").on("click",function(n){$(".task-body-main").data("should-warn")&&(s||void 0!=e&&e.getValue()!=t)&&!o&&(0==window.confirm("Suas alterações ainda não foram salvas, clique em Responder para salvá-las. Deseja ir para a próxima aula?")&&n.preventDefault())}),$(".markdownEditor-textArea, .phrase-input").on("change",function(){s=!0}),$(".task-actions-button-answer").on("click",function(){o=!0}),$(document).click(function(t){$(window).width()<768&&($(t.target).closest(".task-menu-button").length||$(t.target).closest(".task-menu").length||$(t.target).closest(".settings-box").length||(n.addClass("menu--inactive"),a.addClass("task-menu-button--inactive"),c()))}),$(".task-menu-section-title,.task-menu-nav,.task-menu-sections").on("click",function(t){n.removeClass("menu--inactive"),a.removeClass("task-menu-button--inactive")}),$(".settings-button").on("click",function(t){t.stopPropagation(),$(this).toggleClass("settings-button--active")}),$("html").click(function(){$(".settings-button").removeClass("settings-button--active")}),$(window).load(function(){$(".alternativeList-item--checked").size()>0&&(Task.toggleChoiceableOpinion(),Choiceable.showAlternativeOpinions(),Choiceable.showAlternativeOpinionsAndNextButton())}),$(".task-actions-button-answer").on("click",function(){$(this).attr("aria-expanded","true")}),$("[data-submittable=true]").on("click",function(){Task.submitAnswer()}),$(".task-actions-button-showOpinion").on("click",function(){Task.showOpinionIfAvailable()})}();var sticky=function(){var t=document.querySelector(".task-menu"),e=document.querySelector(".task-body");if(("scrollY"in window||"pageYOffset"in window)&&"requestAnimationFrame"in window){var n,i,a;window.addEventListener("resize",c),setTimeout(c,0),setTimeout(c,200);var s=window.scrollY||window.pageYOffset,o=0;return requestAnimationFrame(function e(){t&&(n>a||window.innerWidth<=691?t.style.position="absolute":(t.style.position="fixed",function(){var e=window.scrollY||window.pageYOffset;if(!(s==e||e<0||e>document.documentElement.offsetHeight-i)){var a=Math.max(Math.min(o+e-s,n-i),0);isNaN(a)||(a!=o&&(t.style.transform="translateY("+-a+"px)",o=a),s=e)}}()),requestAnimationFrame(e))}),{recalc:c}}function c(){t&&(n=t.getBoundingClientRect().height,i=window.innerHeight,a=e.getBoundingClientRect().height)}t.style.position="absolute"}();