$(function(){var e,a,t,i,o,r,n,s,l=$("#video-container-data");function d(){return l.children("iframe").size()>0}function c(){if(!d()){$("#loading").remove();var e=$(".video-changePlayer");e.unbind("click"),e.attr("title","O player com controle de velocidade está temporariamente indisponível."),$(".settings-box-item-player").addClass("settings-box-item-player--disabled"),$(".video-changePlayer span").show(),v()}}function v(){var e,a;0==$("#vimeo-iframe").length&&(e=$(".video-changePlayer").data("uri"),(a=$('<iframe id="vimeo-iframe" class="video-js vjs-tech" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>')).attr("src",e+"?api=1"),a.hide(),l.append(a)),$("#video-player-frame").toggle(),$("#vimeo-iframe").toggle(),$("#boavista_player").toggle(),$("#loading").toggle(),videojs("video-player-frame").pause(),$("#vimeo-iframe")[0].contentWindow.postMessage('{"method":"pause","value":""}',"*")}e=l.data("section-id"),a=l.data("task-id"),t=l.data("course"),i=l.data("course-id"),o=l.data("playback-rate"),r=l.data("quality"),n=l.data("gnarus-name"),s="/course/"+t+"/task/"+a+"/video",$.get(s,function(a){!function(e,a,t,i,o,r){var n=$('<video id="video-player-frame" class="video-js vjs-default-skin video-player-frame video-player" controls preload="auto" poster="/images/video/vinheta-'+r+'.png"></video>');$.each(e,function(){var e=$('<source type="video/mp4">');e.attr("src",this.link),e.attr("data-res",this.quality),n.append(e)}),d()&&n.hide(),l.append(n)}(a,0,0,0,0,n),function(e,a,t,i){var o="course-video",r="course-"+e+" section-"+a;function n(){var e=this.playbackRate();$.post("/user/profile/setPlaybackRate",{rate:e}),ga("send","event",{eventCategory:o,eventAction:"ratechange",eventLabel:r,eventValue:e,nonInteraction:!0})}HDtoggle("video-player-frame",i),videojs("video-player-frame",{playbackRates:[.7,.8,1,1.2,1.5,2],plugins:{HD:{},ga:{eventCategory:o,eventLabel:r}}},function(){this.ga(),this.on("ratechange",n),this.on("error",c)}).ready(function(){this.playbackRate(t)})}(i,e,o,r),$("#loading").remove(),$("#video-player-frame").bind("contextmenu",function(){return!1}),l.hasClass("custom-player")&&$("#video-player-frame").remove()}).fail(c),$(".video-changePlayer").on("click",v),$(window).keypress(function(e){if(32==e.which&&!$(".skipKeyPress").is(":focus")){var a=document.querySelector("video");a&&(e.preventDefault(),a&&1==a.paused?a.play():a.pause())}})});